#+STARTUP: indent

* sysctl.conf
- コンテナ起動時に発生するエラー対策

- docker01, 02, 03
#+begin_src sh
$ sudo docker logs elastic_xx
ERROR: [2] bootstrap checks failed
[1]: memory locking requested for elasticsearch process but memory is not locked
[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]

$ sudo echo "vm.max_map_count = 262144" >> /etc/sysctl.conf
#+end_src

* swarm nodeにラベルを追加

- docker01


#+begin_src sh
$ sudo docker node update --label-add elastic.node=1 docker1
$ sudo docker node update --label-add elastic.node=2 docker2
$ sudo docker node update --label-add elastic.node=3 docker3
#+end_src
